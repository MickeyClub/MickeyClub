<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="ZhangMingQin&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ZhangMingQin&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangMingQin&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>ZhangMingQin's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZhangMingQin's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录自己学习、思考、总结、分享</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/05/JavaScript数组去重/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/05/JavaScript数组去重/" itemprop="url">JavaScript数组去重</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-05T19:22:48+08:00">
                2018-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h1><h3 id="数组冒泡排序算法"><a href="#数组冒泡排序算法" class="headerlink" title="数组冒泡排序算法"></a>数组冒泡排序算法</h3><p>冒泡算法排序核心：数组中相邻的两个元素比较大小，如果前者大于后者则交换位置</p>
<p>原理:</p>
<ol>
<li>外层循环决定比较轮数</li>
<li>内层循环决定比较次数</li>
<li>相邻两个元素比较大小,如果前面大于后面则交换位置</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">18</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">5</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(arr);   <span class="comment">//[18, 15, 10, 20, 5]</span></span><br><span class="line">    <span class="comment">// 外层循环决定比较轮数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 内层循环决定比较次数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; arr.length<span class="number">-1</span>-i; j++) &#123;</span><br><span class="line">            <span class="comment">// 核心: 比较两个值大小,如果第一个数大于第二个数,则交换位置</span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">var</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(arr);   <span class="comment">//[5, 10, 15, 18, 20]</span></span><br></pre></td></tr></table></figure>
<h3 id="数组去重-1"><a href="#数组去重-1" class="headerlink" title="数组去重"></a>数组去重</h3><h4 id="双层循环方法"><a href="#双层循环方法" class="headerlink" title="双层循环方法"></a>双层循环方法</h4><p>原理</p>
<ol>
<li><p>外层循环遍历旧数组arr</p>
</li>
<li><p>内层循环遍历新数组newArr，将arr[i]依次与newArr的每一个元素比较<br> 2.1 如果arr[i] == newArr[j],表示元素重复，则跳出内层循环</p>
</li>
<li>内层循环遍历完成之后，如果数组是唯一的,那么j就等于新数组的长度,就将旧数组添加到新数组</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">20</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">78</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">39</span>,<span class="number">20</span>];<span class="comment">//[20,25,66,78,39]</span></span><br><span class="line"><span class="comment">// 旧数组</span></span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"><span class="comment">// 遍历旧数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 遍历新数组,比较新旧数组是否重复,重复就跳出循环</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; newArr.length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] === newArr[j])&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果数组是唯一的,那么j就等于新数组的长度,就将旧数组添加到新数组</span></span><br><span class="line">    <span class="keyword">if</span>(j === newArr.length)&#123;</span><br><span class="line">        newArr.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);   <span class="comment">//[20, 25, 66, 78, 25, 66, 39, 20]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr);    <span class="comment">//[20, 25, 66, 78, 39]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>总结<ul>
<li>使用了</li>
<li>并且兼容性好</li>
</ul>
</li>
</ul>
<h4 id="indexOf方法"><a href="#indexOf方法" class="headerlink" title="indexOf方法"></a>indexOf方法</h4><blockquote>
<p>可以使用indexOf简化内层循环</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">20</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">78</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">39</span>,<span class="number">20</span>];<span class="comment">//[20,25,66,78,39]</span></span><br><span class="line"><span class="comment">// 旧数组</span></span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 使用indexOf方法</span></span><br><span class="line">    <span class="keyword">if</span>(newArr.indexOf(arr[i]) === <span class="number">-1</span>)&#123;</span><br><span class="line">        newArr.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);   <span class="comment">//[20, 25, 66, 78, 25, 66, 39, 20]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr);    <span class="comment">//[20, 25, 66, 78, 39]</span></span><br></pre></td></tr></table></figure>
<h3 id="排序后去重"><a href="#排序后去重" class="headerlink" title="排序后去重"></a>排序后去重</h3><p>试想我们先将要去重的数组使用 sort 方法排序后，相同的值就会被排在一起，然后我们就可以只判断当前元素与上一个元素是否相同，相同就说明重复，不相同就添加进 res</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = [];</span><br><span class="line">    <span class="keyword">var</span> sortedArray = array.concat().sort();</span><br><span class="line">    <span class="keyword">var</span> seen;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = sortedArray.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// 如果是第一个元素或者相邻的元素不相同</span></span><br><span class="line">        <span class="keyword">if</span> (!i || seen !== sortedArray[i]) &#123;</span><br><span class="line">            res.push(sortedArray[i])</span><br><span class="line">        &#125;</span><br><span class="line">        seen = sortedArray[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure>
<h4 id="filter方法-ES5"><a href="#filter方法-ES5" class="headerlink" title="filter方法(ES5)"></a>filter方法(ES5)</h4><p>使用indexOf方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));	<span class="comment">//[1, 2, '1']</span></span><br></pre></td></tr></table></figure></p>
<p>排序去重的方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<h4 id="ES6的Array-from"><a href="#ES6的Array-from" class="headerlink" title="ES6的Array.from()"></a>ES6的Array.from()</h4><ul>
<li><p>Array.from()</p>
<ul>
<li>方法从类似数组或可迭代的对象创建一个新的Array实例</li>
</ul>
</li>
<li><p>Set</p>
<ul>
<li>一个可以是任何类型的独一无二的值的集合<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6的Array.from()</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Array.from(): 该方法从类似数组或可迭代的对象创建一个新的Array实例</span></span><br><span class="line">	<span class="comment">// Set:一个可以是任何类型的独一无二的值的集合.</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(array));</span><br><span class="line">	<span class="comment">// 也可以写成如下</span></span><br><span class="line">	<span class="comment">//  return [...new Set(arr)];</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>还可以简化:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unique = <span class="function">(<span class="params">a</span>) =&gt;</span> [...new <span class="built_in">Set</span>(a)]</span><br></pre></td></tr></table></figure></p>
<p>如果用map对象:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> seen = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">a</span>) =&gt;</span> !seen.has(a) &amp;&amp; seen.set(a, <span class="number">1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="对象数组去重-性能优化"><a href="#对象数组去重-性能优化" class="headerlink" title="对象数组去重(性能优化)"></a>对象数组去重(性能优化)</h3><blockquote>
<p>以上方法都是对于数组数据类型而言，如果换做对象数组就无能为力了，下面是对象数组的去重方法</p>
</blockquote>
<p>版本一<br>这种方法是利用一个空的 Object 对象，我们把数组的值存成 Object 的 key 值，比如 Object[value1] = true，在判断另一个值的时候，如果 Object[value2]存在的话，就说明该值是重复的。示例代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(item) ? <span class="literal">false</span> : obj[item] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<p>版本二<br>我们可以发现，版本一是有问题的，因为 数字1 和 字符串’1’ 是不同的，但是这种方法会判断为同一个值，这是因为对象的键值只能是字符串，所以我们可以使用 typeof item + item 拼成字符串作为 key 值来避免这个问题：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<p>版本三<br>然而，即便如此，我们依然无法正确区分出两个对象，比如 {value: 1} 和 {value: 2}，因为 typeof item + item 的结果都会是 object[object Object]，不过我们可以使用 JSON.stringify 将对象序列化：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [&#123;<span class="attr">value1</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">value2</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">value1</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">value4</span>:<span class="number">4</span>&#125;];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)) ? <span class="literal">false</span> : obj[<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/13/github的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/github的使用/" itemprop="url">Github的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T22:35:43+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="将本地项目挂载到github预览"><a href="#将本地项目挂载到github预览" class="headerlink" title="将本地项目挂载到github预览"></a>将本地项目挂载到github预览</h1><blockquote>
<p>前提条件：</p>
<ul>
<li>已有github账号</li>
<li>配置好github的ssh key信息</li>
</ul>
</blockquote>
<hr>
<h2 id="上传本地项目到github"><a href="#上传本地项目到github" class="headerlink" title="上传本地项目到github"></a>上传本地项目到github</h2><ol>
<li>先进入项目文件夹，通过git命令git init把这个目录变成git可以管理的仓库<blockquote>
<p><code>git init</code></p>
</blockquote>
</li>
<li>使用git add .添加到暂存区里面，不要忘记add .后面的小数点<blockquote>
<p><code>git add .</code></p>
</blockquote>
</li>
<li>用命令git commit -m “注释内容”把文件提交到仓库，引号里面为注释<blockquote>
<p><code>git commit -m &quot;注释&quot;</code></p>
</blockquote>
</li>
<li>关联到远程仓库   git remore add origin （你的仓库名，一定要关联成功<blockquote>
<p><code>git remore add origin git@github.com:MeetZhang/meetzhang.github.io.git</code></p>
</blockquote>
</li>
<li>将项目上传到github仓库中<blockquote>
<p><code>git push -u origin master</code></p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="直接在-GitHub-创建一个仓库，然后下载到本地"><a href="#直接在-GitHub-创建一个仓库，然后下载到本地" class="headerlink" title="直接在 GitHub 创建一个仓库，然后下载到本地"></a>直接在 GitHub 创建一个仓库，然后下载到本地</h2><blockquote>
<ul>
<li>首先在GitHub 上新建一个仓库</li>
<li>然后获得仓库地址如：<a href="mailto:`git@github.com" target="_blank" rel="noopener">`git@github.com</a>:MeetZhang/meetzhang.github.io.git`</li>
</ul>
</blockquote>
<ol>
<li>在安全的目录下将github的仓库地址下载到本地</li>
</ol>
<blockquote>
<p><code>git clone git@github.com:MeetZhang/meetzhang.github.io.git</code></p>
</blockquote>
<ol start="2">
<li>进入刚下载好的目录文件，一定要注意</li>
</ol>
<blockquote>
<p><code>cd &lt;文件名&gt;</code></p>
</blockquote>
<ol start="3">
<li>将项目文件上添加到github暂存区，注意add .后面的小数点，一定要写</li>
</ol>
<blockquote>
<p><code>git add .</code></p>
</blockquote>
<ol start="4">
<li>提交到本地库并注释    </li>
</ol>
<blockquote>
<p><code>git commit -m &quot;注释&quot;</code></p>
</blockquote>
<ol start="5">
<li>推送到github远程库</li>
</ol>
<blockquote>
<p><code>git push origin master</code></p>
</blockquote>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="上传本地项目到github-1"><a href="#上传本地项目到github-1" class="headerlink" title="上传本地项目到github"></a>上传本地项目到github</h3><ol>
<li><code>git init</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m &quot;注释&quot;</code></li>
<li><code>git remore add origin git@github.com:MeetZhang/meetzhang.github.io.git</code></li>
<li><code>git push -u origin master</code></li>
</ol>
<h3 id="直接在-GitHub-创建一个仓库，然后下载到本地-1"><a href="#直接在-GitHub-创建一个仓库，然后下载到本地-1" class="headerlink" title="直接在 GitHub 创建一个仓库，然后下载到本地"></a>直接在 GitHub 创建一个仓库，然后下载到本地</h3><ol>
<li><code>git clone git@github.com:MeetZhang/meetzhang.github.io.git</code></li>
<li><code>cd &lt;文件名&gt;</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m &quot;注释&quot;</code></li>
<li><code>git push origin master&quot;</code></li>
</ol>
<h3 id="上传更新"><a href="#上传更新" class="headerlink" title="上传更新"></a>上传更新</h3><blockquote>
<p>你在本地目录有任何变动，只需按照以下顺序就能上传：</p>
</blockquote>
<ol>
<li><code>git pull</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m &quot;注释信息&quot;</code></li>
<li><code>git push -u origin master</code></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/01/画出自适应皮卡丘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/01/画出自适应皮卡丘/" itemprop="url">画出自适应皮卡丘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-01T12:30:43+08:00">
                2017-12-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/demo/" itemprop="url" rel="index">
                    <span itemprop="name">demo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Pikachu"><a href="#Pikachu" class="headerlink" title="Pikachu"></a>Pikachu</h1><p>预览地址：<a href="https://zmqblog.github.io/Pikachu/" target="_blank" rel="noopener">https://zmqblog.github.io/Pikachu/</a></p>
<hr>
<h2 id="响应式布局画出皮卡丘全过程"><a href="#响应式布局画出皮卡丘全过程" class="headerlink" title="响应式布局画出皮卡丘全过程"></a>响应式布局画出皮卡丘全过程</h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>由CSS3写出响应式布局的皮卡丘，然后基于JQuery框架写JS逻辑实现动态加载，把制作皮卡丘的全过程展现出来，最后用BootStrap优化界面。</p>
<hr>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ul>
<li>HTML</li>
<li>CSS3</li>
<li>JS</li>
<li>JQuery</li>
<li>BootStrap</li>
</ul>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>用HTML+CSS3写出皮卡丘的原型</li>
<li>把页面分割成两半，上半部分展示代码，下半部分展示画皮卡丘全过程</li>
<li>基于JQuery用JS定时器向页面渲染CSS代码，并用CSS写出皮卡丘效果</li>
<li>并用定时器控制调速</li>
<li>最后加上BootStrap进行细节优化</li>
</ol>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>画皮卡丘的嘴唇和舌头比较复杂，需要用到CSS3里的transform指令，还有定时器的使用以及函数式编程</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/20/Ajax、跨域、JSONP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/20/Ajax、跨域、JSONP/" itemprop="url">Ajax的同源&跨域</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-20T09:35:43+08:00">
                2017-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ajax/" itemprop="url" rel="index">
                    <span itemprop="name">Ajax</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Ajax的同源-amp-跨域"><a href="#Ajax的同源-amp-跨域" class="headerlink" title="Ajax的同源&amp;跨域"></a>Ajax的同源&amp;跨域</h1><h3 id="Ajax名词解释"><a href="#Ajax名词解释" class="headerlink" title="Ajax名词解释"></a>Ajax名词解释</h3><ul>
<li><p>Ajax 即“Asynchronous Javascript And XML”（异步 JavaScript 和 XML），是指一种创建交互式网页应用的网页开发技术。                 —– 摘自百度百科</p>
</li>
<li><p><strong>说人话</strong>：可以让网页某个局部部分动态地给服务器发起请求，而不用整个页面刷新。是一种可以局部发请求的技术</p>
</li>
</ul>
<h2 id="1-原生ajax技术实现："><a href="#1-原生ajax技术实现：" class="headerlink" title="1. 原生ajax技术实现："></a>1. 原生ajax技术实现：</h2><blockquote>
<p>学习JS原生方式做异步请求</p>
</blockquote>
<h3 id="1-1-XMLHttpRequest对象"><a href="#1-1-XMLHttpRequest对象" class="headerlink" title="1.1 XMLHttpRequest对象"></a>1.1 XMLHttpRequest对象</h3><ul>
<li>本质：是一个系统内置对象。专门用来发起局部请求的对象。一般会被简称为XHR</li>
</ul>
<h3 id="1-2-请求报文"><a href="#1-2-请求报文" class="headerlink" title="1.2 请求报文"></a>1.2 请求报文</h3><ul>
<li><p>一次请求三大部分：请求行、请求头、请求体（请求正文）</p>
<p><img src="/media/1525960269427.png" alt="1525960269427"></p>
</li>
</ul>
<h3 id="1-3-使用XHR发get请求"><a href="#1-3-使用XHR发get请求" class="headerlink" title="1.3 使用XHR发get请求"></a>1.3 使用XHR发get请求</h3><blockquote>
<p>XMLHttpRequest就是个专门用来发局部请求的对象，而一个请求就包含<strong>请求行、请求头、请求体</strong>这几部分，所以我们也需要依次对这个对象设置这些内容</p>
</blockquote>
<ul>
<li>创建XMLHttpRequest：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：xhr只是我们起的实例名字，实际使用可以自己起，但推荐使用xhr，一看就知道是一个请求对象</p>
</blockquote>
<ul>
<li>设置请求行：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数1：类似于表单中的method属性</span></span><br><span class="line"><span class="comment">//参数2：类似于表单中的action属性</span></span><br><span class="line">xhr.open(<span class="string">'请求方式'</span>,<span class="string">'请求地址'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//例：</span></span><br><span class="line"><span class="comment">//使用get请求，请求服务器的test.php页面</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'./test.php'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>设置请求头（get请求一般不设置）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(键，值);</span><br><span class="line"><span class="comment">//例：</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>发送请求（设置请求体）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.send(请求体内容);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：如果是get请求，一般小括号里为空，什么都不写（get请求没有请求体），如果是post请求，就在小括号里加请求体内容（后面会专门针对post做案例）</p>
</blockquote>
<h3 id="1-4-获得响应正文"><a href="#1-4-获得响应正文" class="headerlink" title="1.4 获得响应正文"></a>1.4 获得响应正文</h3><blockquote>
<p>根据学过的http协议我们知道，当发送请求报文后，其本质是为了从服务器拿到响应正文。那么ajax如何拿？</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当响应体回来了会调用此方法</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//当此函数调用时，这个属性里保存的就是响应正文</span></span><br><span class="line">	xhr.responseText;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么要用事件形式？</p>
<p>​    发送请求是一个网络操作，而受网络环境影响，可能会有延迟。我们不知道什么时候才能得到响应正文。所以最好用事件的形式，一旦接收到响应正文自动触发事件。</p>
</blockquote>
<h3 id="1-5-总结ajax代码步骤："><a href="#1-5-总结ajax代码步骤：" class="headerlink" title="1.5 总结ajax代码步骤："></a>1.5 总结ajax代码步骤：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建请求对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">//2. 设置请求行</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>,<span class="string">'./test.php'</span>);</span><br><span class="line"><span class="comment">//注：get请求可以不用设置请求头</span></span><br><span class="line"><span class="comment">//3. 发送请求</span></span><br><span class="line">xhr.send();</span><br><span class="line"><span class="comment">//4. 拿到响应体</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-同源-amp-跨域"><a href="#2-同源-amp-跨域" class="headerlink" title="2. 同源&amp;跨域"></a>2. 同源&amp;跨域</h2><h3 id="2-1-名词解释"><a href="#2-1-名词解释" class="headerlink" title="2.1 名词解释"></a>2.1 名词解释</h3><ul>
<li>同源：<ul>
<li>协议头、域名、端口完全一致就叫同源</li>
</ul>
</li>
<li>跨域：<ul>
<li>协议头、域名、端口有一个不一样就叫跨域</li>
</ul>
</li>
<li>判断是否同源，如下：</li>
</ul>
<p>如：<a href="http://www.example.com/detail.html" target="_blank" rel="noopener">http://www.example.com/detail.html</a> 与以下地址对比</p>
<table>
<thead>
<tr>
<th>对比地址</th>
<th>是否同源</th>
<th>原因</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://api.example.com/detail.html" target="_blank" rel="noopener">http://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>域名不同</td>
</tr>
<tr>
<td><a href="https://www.example.com/detail.html" target="_blank" rel="noopener">https://www.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com:8080/detail.html" target="_blank" rel="noopener">http://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口不同</td>
</tr>
<tr>
<td><a href="http://api.example.com:8080/detail.html" target="_blank" rel="noopener">http://api.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>域名、端口不同</td>
</tr>
<tr>
<td><a href="https://api.example.com/detail.html" target="_blank" rel="noopener">https://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议、域名不同</td>
</tr>
<tr>
<td><a href="https://www.example.com:8080/detail.html" target="_blank" rel="noopener">https://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口、协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com/other.html" target="_blank" rel="noopener">http://www.example.com/other.html</a></td>
<td>同源</td>
<td>只是目录不同</td>
</tr>
</tbody>
</table>
<h3 id="2-2-跨域的影响"><a href="#2-2-跨域的影响" class="headerlink" title="2.2 跨域的影响"></a>2.2 跨域的影响</h3><ul>
<li>注：根据同源和跨域的意思，以后讲  <code>跨域</code>  就是指  <code>不同源</code></li>
<li>如果要在  <code>localhost/test.html</code>  这个网站上访问  <code>http://api.douban.com/v2/movie/top250</code> 这个接口，那么浏览器会出现以下错误：</li>
</ul>
<p><img src="/media/1524476169312.png" alt="1524476169312"></p>
<blockquote>
<p>原因：浏览器本身从安全角度考虑，不支持<strong>跨域</strong>访问</p>
</blockquote>
<h2 id="3-JSONP"><a href="#3-JSONP" class="headerlink" title="3. JSONP"></a>3. JSONP</h2><h3 id="3-1-研究如何突破跨域请求限制"><a href="#3-1-研究如何突破跨域请求限制" class="headerlink" title="3.1 研究如何突破跨域请求限制"></a>3.1 研究如何突破跨域请求限制</h3><h4 id="3-1-1-使用img标签（拿不到响应体）"><a href="#3-1-1-使用img标签（拿不到响应体）" class="headerlink" title="3.1.1 使用img标签（拿不到响应体）"></a>3.1.1 使用img标签（拿不到响应体）</h4><ul>
<li>我们知道：<code>img</code> 标签，有个 <code>href</code> 属性，这个属性其实也是向服务器发送请求，我们看看这种方式是否可以跨越访问，代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">href</span>=<span class="string">"http://api.douban.com/v2/movie/top250"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>此时可以看到能正确收到响应，但拿不到响应体（返回的JSON数据），如图：</li>
</ul>
<p><img src="/media/1524476795561.png" alt="1524476795561"></p>
<h4 id="3-1-2-使用link标签（拿不到响应体）"><a href="#3-1-2-使用link标签（拿不到响应体）" class="headerlink" title="3.1.2 使用link标签（拿不到响应体）"></a>3.1.2 使用link标签（拿不到响应体）</h4><ul>
<li><code>link</code> 标签，有个  <code>src</code>  属性，我们以前是用来外联css样式，其实它也是相当于发送请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">src</span>=<span class="string">"http://api.douban.com/v2/movie/top250"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>看浏览器响应报文，可以发现link标签也可以跨域请求，但是一样，没办法拿到响应体</li>
</ul>
<h4 id="3-1-3-使用script标签（曲线拿到响应体）"><a href="#3-1-3-使用script标签（曲线拿到响应体）" class="headerlink" title="3.1.3 使用script标签（曲线拿到响应体）"></a>3.1.3 使用script标签（曲线拿到响应体）</h4><ul>
<li>代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">json</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'我被调用了'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(json);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://api.douban.com/v2/movie/top250?callback=test"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>结果如下图</li>
</ul>
<p><img src="/media/1524478019298.png" alt="1524478019298"></p>
<blockquote>
<p>说明：我们可以看到，我们预先定义了一个函数叫test，再然后在src里加了一个参数callback=test，可以发现，当请求完成，会自动调用test这个函数，并且把响应体（JSON数据）当做参数传递过来</p>
</blockquote>
<h3 id="3-2-使用script标签拿到JSON数据详解"><a href="#3-2-使用script标签拿到JSON数据详解" class="headerlink" title="3.2 使用script标签拿到JSON数据详解"></a>3.2 使用script标签拿到JSON数据详解</h3><h4 id="3-2-1-script导入外部文件作用"><a href="#3-2-1-script导入外部文件作用" class="headerlink" title="3.2.1 script导入外部文件作用"></a>3.2.1 script导入外部文件作用</h4><ul>
<li>使用script导入外部文件时，默认会把文件内容当JS代码执行，例：</li>
<li>新建  <code>1.txt</code> 文件，文件内容如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">'你好'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>新建  <code>index.html</code>  文件，核心代码如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"1.txt"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>结果：</p>
<p><img src="/media/1524531439034.png" alt="1524531439034"></p>
</li>
</ul>
<blockquote>
<p>结论：script导入文件会默认把文件内容当JS代码执行，跟文件格式无关</p>
</blockquote>
<h4 id="3-2-2-script标签曲线拿到响应体原理"><a href="#3-2-2-script标签曲线拿到响应体原理" class="headerlink" title="3.2.2 script标签曲线拿到响应体原理"></a>3.2.2 script标签曲线拿到响应体原理</h4><ul>
<li>新建  <code>index.html</code>  页面，代码如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//声明一个success函数</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- script导入文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.demo.com/top250.php"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>新建  <code>top250.php</code> 页面，代码如下</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"success('hello')"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>结果</p>
<p><img src="/media/1524533356664.png" alt="1524533356664"></p>
</li>
</ul>
<blockquote>
<p>说明：请求的top250文件里，服务器最终返回的是 success(‘hello’); 这个当JS代码执行时，是调用函数并传递参数hello的语法，因此可以看到success函数被调用，并且打印了参数hello</p>
</blockquote>
<ul>
<li>图解：</li>
</ul>
<p><img src="/media/1524533792418.png" alt="1524533792418"></p>
<blockquote>
<p>思考：如果在上例中，把success函数的参数换成json对象，会怎样？</p>
</blockquote>
<ul>
<li>修改 <code>top250.php</code>  代码，如下:</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$data = <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'jack'</span>,<span class="string">'age'</span>=&gt;<span class="number">16</span>,<span class="string">'gender'</span>=&gt;<span class="string">'true'</span> );</span><br><span class="line"></span><br><span class="line">$json = json_encode($data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"success(&#123;$json&#125;)"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>再次访问网页可以发现，打印的参数就编程了json对象</p>
<p><img src="/media/1524534767555.png" alt="1524534767555"></p>
</li>
</ul>
<blockquote>
<p> 结论：script标签拿到JSON数据的原理就是在服务器端写 <strong>调用浏览器端函数的语法</strong> ，然后把JSON数据当参数传递过去</p>
</blockquote>
<blockquote>
<p>思考：现在服务端代码这么写，如果要解决跨域问题，是不是每个浏览器端都要准备一个名叫success的函数？能让浏览器端自己指定吗？怎么指定？</p>
</blockquote>
<ul>
<li>请求数据时加参数，修改  <code>index.html</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//声明函数</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params">obj</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 请求数据，并加入callback参数，值为myFunc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.demo.com/top250.php?callback=myFunc"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>此时，除了请求  <code>top250.php</code> 外，还传递了个  <code>callback</code>  的参数过去，修改  <code>top250.php</code>，拿到这个参数</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//拿到传递过来的参数，即函数名</span></span><br><span class="line">    $funcName = $_GET[<span class="string">'callback'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//准备数据</span></span><br><span class="line">    $data = <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'jack'</span>,<span class="string">'age'</span>=&gt;<span class="number">16</span>,<span class="string">'gender'</span>=&gt;<span class="keyword">true</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//转化为JSON</span></span><br><span class="line">    $json = json_encode($data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传过来的是什么函数名，就调用什么函数</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"$funcName($json)"</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>结果：此时就完成了指定函数名让服务器调用传参的效果了。</p>
<p>这就是之前  <code>跨域</code>  拿豆瓣数据的原理，即服务器端调用浏览器端的函数，把参数传递过来即可</p>
</blockquote>
<h3 id="3-3-JSONP概念总结"><a href="#3-3-JSONP概念总结" class="headerlink" title="3.3 JSONP概念总结"></a>3.3 JSONP概念总结</h3><ul>
<li><p><strong>JSONP</strong>：</p>
<ul>
<li><strong>JSON</strong> with <strong>P</strong>adding，是一种借助于 <code>script</code> 标签发送跨域请求的技巧方案。</li>
</ul>
</li>
<li><p>它不是一套新技术，只是聪明的程序员想出的一套方案</p>
</li>
<li><p>能不能用这套方案，要看服务器端代码怎么写，服务器端如果写了调用函数的代码，那么就能支持JSONP方案</p>
</li>
<li><p>以后服务器的接口会有接口文档进行说明是否支持  <strong>JSONP</strong></p>
</li>
<li><p>建议：不要随意使用别人的接口，特别是别人写的支持jsonp的接口</p>
<p>例:<a href="https://developers.douban.com/wiki/?title=api_v2" target="_blank" rel="noopener">https://developers.douban.com/wiki/?title=api_v2</a></p>
</li>
</ul>
<h2 id="4-CORS"><a href="#4-CORS" class="headerlink" title="4. CORS"></a>4. CORS</h2><ul>
<li>Cross Origin Resource Share，跨域资源共享</li>
<li>直接从服务器端解决ajax无法跨域访问的问题（可以不要用jsonp了）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 允许远端访问</span></span><br><span class="line">header(<span class="string">'Access-Control-Allow-Origin: *'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 这种方案无需客户端作出任何变化（客户端不用改代码），只是在服务端添加一个 <code>Access-Control-Allow-Origin</code> 的响应头，表示这个资源是否允许指定域请求（*代表任何网站都可以访问）。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/11/Ajax解决跨域/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/11/Ajax解决跨域/" itemprop="url">Ajax解决跨域方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-11T09:35:43+08:00">
                2017-11-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ajax/" itemprop="url" rel="index">
                    <span itemprop="name">Ajax</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Ajax解决跨域"><a href="#Ajax解决跨域" class="headerlink" title="Ajax解决跨域"></a>Ajax解决跨域</h1><blockquote>
<p>浏览器限制的,浏览器出于安全角度考虑,不支持跨域访问</p>
</blockquote>
<p>JavaScript中出现不能访问跨域时报错情况<br><img src="/media/1534304091943.png" alt="Alt text"></p>
<h2 id="同源和跨域"><a href="#同源和跨域" class="headerlink" title="同源和跨域"></a>同源和跨域</h2><ul>
<li>同源:<ul>
<li>协议头、域名、端口完全一致就叫同源</li>
</ul>
</li>
<li>跨域(不同源)：<ul>
<li>协议头、域名、端口有一个不一样就叫跨域</li>
</ul>
</li>
</ul>
<h2 id="如何解决跨域问题"><a href="#如何解决跨域问题" class="headerlink" title="如何解决跨域问题"></a>如何解决跨域问题</h2><blockquote>
<p>前提是必须先看接口文档是否支持JSONP方案</p>
</blockquote>
<ul>
<li><p>JSONP方案</p>
<ol>
<li>使用方法: 用script标签的scr属性去请求接口,并且在接口地址后面传get参数叫callback,值为你自己写的某一个函数名,它会自动调用这个函数,并且把JSON数据当参数传过来</li>
<li>代码如下<figure class="highlight htmlbars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">    // callback调用的f1函数</span></span><br><span class="line"><span class="xml">    function f1(obj) &#123;</span></span><br><span class="line"><span class="xml">        //使用obj接收跨域的JSON响应体</span></span><br><span class="line"><span class="xml">        console.log(obj);  </span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- 跨域拿到JSON响应体,并通过get传参数callback并调f1函数 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://api.douban.com/v2/movie/top250?callback=f1"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>JSONP原理</p>
<ul>
<li>后端接口拿到你提交的函数名,然后在响应体里返回调用这个函数名,并且把JSON数据当做参数传递给前端,完成回调</li>
</ul>
</li>
</ul>
<p>总结:     JSONP就是一套用script标签获得JSON数据的技术方案,通过javascript callback的形式实现跨域访问</p>
<ul>
<li>CORS方案<blockquote>
<p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）</p>
</blockquote>
</li>
</ul>
<p>使用方法<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个响应头，告诉浏览器我这个内容是html的，用utf-8的编码来解析</span></span><br><span class="line">    <span class="comment">// header('Content-type:text/html;charset=utf-8');</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 这就代表只有my.com这个网站可以访问</span></span><br><span class="line">    <span class="comment">// header('Access-Control-Allow-Origin: http://www.my.com');</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// *代表所有网站都可以访问</span></span><br><span class="line">    header(<span class="string">'Access-Control-Allow-Origin: *'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'你好'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>总结: CORS跨域资源共享 服务器接口需要设置字段:<code>Access-Control-Allow-Origin *</code>代表所有网站都可以访问</p>
<h3 id="如何读取到不让跨域访问的接口"><a href="#如何读取到不让跨域访问的接口" class="headerlink" title="如何读取到不让跨域访问的接口"></a>如何读取到不让跨域访问的接口</h3><ol>
<li><p>如果一个接口不能让你用xhr的方式访问,那么证明它肯定没用CORS方案进行跨域请求</p>
</li>
<li><p>这时就要考虑JSONP跨域,但是JSONP也需要跨域访问接口支持</p>
</li>
<li><p>解决方法:<br> 通过浏览器请求服务器,服务器在去请求跨域接口<br><img src="/media/1534302068232.png" alt="Alt text"></p>
</li>
<li>代码如下</li>
</ol>
<p>JavaScript代码<br><figure class="highlight htmlbars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">	//发起局部请求</span></span><br><span class="line"><span class="xml">    var xhr = new XMLHttpRequest();</span></span><br><span class="line"><span class="xml">	//请求行  (请求方式和请求路径)</span></span><br><span class="line"><span class="xml">    xhr.open('get','data.php');</span></span><br><span class="line"><span class="xml">	//发送请求</span></span><br><span class="line"><span class="xml">    xhr.send();</span></span><br><span class="line"><span class="xml">	//监听事件</span></span><br><span class="line"><span class="xml">    xhr.onload = function()&#123;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        // 放回的响应体console.log(xhr.responseText);</span></span><br><span class="line"><span class="xml">        // 将JSON对象转为js对象</span></span><br><span class="line"><span class="xml">        var obj = JSON.parse(xhr.responseText);</span></span><br><span class="line"><span class="xml">        console.log(obj);</span></span><br><span class="line"><span class="xml">        </span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>php服务器<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">//读取文件，把文件的内容当做返回值返回</span></span><br><span class="line">    <span class="comment">//它除了可以读取本地的文件外，还可以读取网络的接口</span></span><br><span class="line">    $result = file_get_contents(<span class="string">'https://www.smzdm.com/homepage/json_more?timesort=153336701283&amp;p=3'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> $result;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>总结<br>想要访问不让跨域访问的接口,就只能自己试试它支不支持JSONP方案,如果不行,只能另想他 </p>
<h3 id="总结网页中能够发送请求的方法"><a href="#总结网页中能够发送请求的方法" class="headerlink" title="总结网页中能够发送请求的方法"></a>总结网页中能够发送请求的方法</h3><ul>
<li>XMLHttpRequest()方法</li>
<li>a标签的href属性</li>
<li>form表单的active属性</li>
<li>img标签的src属性</li>
<li>link标签的href属性</li>
<li>script标签的src属性</li>
</ul>
<h3 id="ip与dns"><a href="#ip与dns" class="headerlink" title="ip与dns"></a>ip与dns</h3><ul>
<li>IP是计算机在网络中的唯一标识，互联网中要找到某台设备，只能通过ip地址找</li>
<li>DNS服务器：相当于是一个翻译官，它把你输入的域名翻译成了IP地址</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol>
<li>什么叫跨域？协议头、域名、端口有一个不一样就叫跨域</li>
<li>什么影响？浏览器出于安全角度不允许用xhr访问跨域接口</li>
<li>JSONP跨域访问要接口支持才能用</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/01/Ajax封装、jQuery中的ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/01/Ajax封装、jQuery中的ajax/" itemprop="url">封装Ajax</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-01T11:22:32+08:00">
                2017-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ajax/" itemprop="url" rel="index">
                    <span itemprop="name">Ajax</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="封装ajax、jQuery中的ajax"><a href="#封装ajax、jQuery中的ajax" class="headerlink" title="封装ajax、jQuery中的ajax"></a>封装ajax、jQuery中的ajax</h1><h2 id="1-封装ajax代码之一"><a href="#1-封装ajax代码之一" class="headerlink" title="1. 封装ajax代码之一"></a>1. 封装ajax代码之一</h2><h3 id="1-1-为什么要封装"><a href="#1-1-为什么要封装" class="headerlink" title="1.1 为什么要封装"></a>1.1 为什么要封装</h3><ul>
<li>我们一个完整的网页，很多部分都需要异步请求数据，会用到ajax技术，但每次ajax请求的大体代码都是一样的，根据封装的思想：重复的代码封装成函数，因此封装函数能加快开发以及让代码相对更整洁</li>
</ul>
<h3 id="1-2-简单封装思路"><a href="#1-2-简单封装思路" class="headerlink" title="1.2 简单封装思路"></a>1.2 简单封装思路</h3><ul>
<li>声明个函数，把之前实现的 <code>ajax</code> 请求代码，直接当函数体封装起来，代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">	<span class="comment">//2. 设置请求头</span></span><br><span class="line">    xhr.open(<span class="string">'get'</span>, <span class="string">'www.zll.com/data.php'</span>)</span><br><span class="line">	<span class="comment">//3. 发送请求</span></span><br><span class="line">    xhr.send(<span class="literal">null</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-封装ajax代码之二"><a href="#2-封装ajax代码之二" class="headerlink" title="2. 封装ajax代码之二"></a>2. 封装ajax代码之二</h2><h3 id="2-1-之前封装存在的问题"><a href="#2-1-之前封装存在的问题" class="headerlink" title="2.1 之前封装存在的问题"></a>2.1 之前封装存在的问题</h3><ul>
<li>之前的封装，功能局限性太强，体现在以下几点<ul>
<li>只能发送get请求</li>
<li>只能请求<a href="http://www.zll.com/data.php这个接口" target="_blank" rel="noopener">www.zll.com/data.php这个接口</a></li>
<li>没有携带参数</li>
<li>拿到响应体后只是打印响应体</li>
</ul>
</li>
</ul>
<h3 id="2-2-继续封装ajax"><a href="#2-2-继续封装ajax" class="headerlink" title="2.2 继续封装ajax"></a>2.2 继续封装ajax</h3><ul>
<li>根据封装思想，不同的数据或操作当参数传递，我们对之前封装继续改进。</li>
</ul>
<h4 id="2-2-1-解决只能发get请求的问题"><a href="#2-2-1-解决只能发get请求的问题" class="headerlink" title="2.2.1 解决只能发get请求的问题"></a>2.2.1 解决只能发get请求的问题</h4><ul>
<li>请求不能写死，应该当参数传递过来，修改后代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//type参数：传get或post</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">type</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">	<span class="comment">//2. 设置请求行</span></span><br><span class="line">    xhr.open(type, <span class="string">'www.zll.com/data.php'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(type== <span class="string">"post"</span> || type==<span class="string">"POST"</span>)&#123;</span><br><span class="line">        </span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//3. 发送请求</span></span><br><span class="line">    xhr.send(<span class="literal">null</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-2-解决只能请求一个接口的问题"><a href="#2-2-2-解决只能请求一个接口的问题" class="headerlink" title="2.2.2 解决只能请求一个接口的问题"></a>2.2.2 解决只能请求一个接口的问题</h4><ul>
<li>网址接口不能写死，当做参数传递过来，修改后代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//type参数：传get或post</span></span><br><span class="line"><span class="comment">//url参数：请求的接口地址</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">type,url</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">	<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">	<span class="comment">//2. 设置请求头</span></span><br><span class="line">    xhr.open(type, url)</span><br><span class="line">	<span class="comment">//3. 发送请求</span></span><br><span class="line">    xhr.send(<span class="literal">null</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-解决不能携带参数的问题"><a href="#2-2-3-解决不能携带参数的问题" class="headerlink" title="2.2.3 解决不能携带参数的问题"></a>2.2.3 解决不能携带参数的问题</h4><ul>
<li>多加一个函数的参数，把请求需要发送的数据当函数参数的传递</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//type参数：传get或post</span></span><br><span class="line"><span class="comment">//url参数：请求的接口地址</span></span><br><span class="line"><span class="comment">//data参数：发请求时的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">type,url,data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.1 判断是get还是post</span></span><br><span class="line">    <span class="keyword">if</span>(type == <span class="string">"get"</span>)&#123;</span><br><span class="line">        <span class="comment">// 拼接参数</span></span><br><span class="line">        url += <span class="string">"?"</span> + data;</span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">         xhr.open(type, url);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(type, url);</span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-4-拿到JSON数据做不同操作"><a href="#2-2-4-拿到JSON数据做不同操作" class="headerlink" title="2.2.4 拿到JSON数据做不同操作"></a>2.2.4 拿到JSON数据做不同操作</h4><ul>
<li>现在我们封装的函数拿到响应体后，只是打印响应体。</li>
<li>每个人拿到响应体，想做的事不一样，也就意味着每个人拿到响应体后写的代码不一样</li>
<li>根据封装思想：不一样的部分当参数传递进来。每个人实现代码不一样，就干脆让调用者把自己要实现的代码当做参数传过来（即传递一个函数）</li>
</ul>
<blockquote>
<p>代码如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//type参数：   传get或post</span></span><br><span class="line"><span class="comment">//url参数：    请求的接口地址</span></span><br><span class="line"><span class="comment">//data参数：   发请求时的参数</span></span><br><span class="line"><span class="comment">//success参数：传过来一个函数，函数内的代码处理响应体</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">type,url,data,success</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.1 判断是get还是post</span></span><br><span class="line">    <span class="keyword">if</span>(type == <span class="string">"get"</span>)&#123;</span><br><span class="line">        <span class="comment">// 拼接参数</span></span><br><span class="line">        url += <span class="string">"?"</span> + data;</span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">         xhr.open(type, url);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(type, url);</span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//转成JSON对象</span></span><br><span class="line">          <span class="keyword">var</span> json = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//交给调用者处理</span></span><br><span class="line">          success(json);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>因为我们封装的ajax代码，可能以后很多项目要用，所以把以上代码写到一个 myajax.js 文件里，以后要用就导入这个文件即可</p>
</blockquote>
<h4 id="2-2-5-测试封装的ajax"><a href="#2-2-5-测试封装的ajax" class="headerlink" title="2.2.5 测试封装的ajax"></a>2.2.5 测试封装的ajax</h4><ul>
<li>新建 <code>data.php</code> 页面，代码如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $data = <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'jack'</span>,<span class="string">'age'</span> =&gt; <span class="number">16</span> );</span><br><span class="line">	<span class="comment">//响应报文为json字符串</span></span><br><span class="line">    <span class="keyword">echo</span> json_encode($data);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>新建  <code>index.html</code> 页面，代码如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导入我们刚刚封装好的ajax工具 --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"myAjax.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数1：请求方式</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数2：请求地址</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数3：参数</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//参数4：拿到响应体的回调函数</span></span></span><br><span class="line"><span class="javascript">    ajax(<span class="string">'get'</span>,<span class="string">'./data.php'</span>,<span class="string">''</span>,<span class="function"><span class="keyword">function</span>(<span class="params">json</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(json);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'假装把拿到的json数据展示到界面上'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>结果如下：</li>
</ul>
<p><img src="/media1524555761758.png" alt="1524555761758"></p>
<h4 id="2-2-6-图解封装函数调用过程"><a href="#2-2-6-图解封装函数调用过程" class="headerlink" title="2.2.6 图解封装函数调用过程"></a>2.2.6 图解封装函数调用过程</h4><p> <img src="/media2332434543.png" alt="1524555761758"></p>
<h2 id="3-封装ajax代码之三"><a href="#3-封装ajax代码之三" class="headerlink" title="3. 封装ajax代码之三"></a>3. 封装ajax代码之三</h2><blockquote>
<p>我们发现，刚刚封装的函数，一共有4个参数，参数太多，而且以后如果要多传一段数据，需要又再加一个参数，能否优化为就一个参数？</p>
</blockquote>
<h3 id="3-1-修改参数"><a href="#3-1-修改参数" class="headerlink" title="3.1 修改参数"></a>3.1 修改参数</h3><ul>
<li>我们可以把参数改成一个对象</li>
<li>修改封装的ajax代码，把多个参数值改成一个参数，要求传入一个对象，代码如下</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  params是一个对象</span></span><br><span class="line"><span class="comment">  params.type     请求类型</span></span><br><span class="line"><span class="comment">  params.url      请求网址</span></span><br><span class="line"><span class="comment">  params.data     请求参数</span></span><br><span class="line"><span class="comment">  params.success  回调函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.1 判断是get还是post</span></span><br><span class="line">    <span class="keyword">if</span>(params.type == <span class="string">"get"</span>)&#123;</span><br><span class="line">        <span class="comment">// 拼接参数</span></span><br><span class="line">        params.url += <span class="string">"?"</span> + params.data;</span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(params.data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//转成JSON对象</span></span><br><span class="line">          <span class="keyword">var</span> json = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//交给调用者处理</span></span><br><span class="line">          params.success(json);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-测试调用"><a href="#3-2-测试调用" class="headerlink" title="3.2 测试调用"></a>3.2 测试调用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用ajax函数，传入一个对象</span></span><br><span class="line"><span class="comment">//对象里有type,url,data,success属性</span></span><br><span class="line">ajax(</span><br><span class="line">    &#123;</span><br><span class="line">        type : <span class="string">'get'</span>,</span><br><span class="line">        url : <span class="string">'./data.php'</span>,</span><br><span class="line">        data : <span class="string">''</span>,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(json);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'假装把拿到的json数据展示到界面上'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="4-封装ajax代码之四"><a href="#4-封装ajax代码之四" class="headerlink" title="4. 封装ajax代码之四"></a>4. 封装ajax代码之四</h2><h3 id="4-1-目的"><a href="#4-1-目的" class="headerlink" title="4.1 目的"></a>4.1 目的</h3><ul>
<li>我们刚刚封装的函数（如果未来还打算继续封装几个有关ajax的请求），会有多个变量名污染（例如全局变量中占用了ajax这个名），如何解决？</li>
</ul>
<p>###4.2 完成</p>
<ul>
<li>把函数都封装到一个对象里，作为对象的方法，即可解决这些函数名污染的问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myJq = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  params是一个对象</span></span><br><span class="line"><span class="comment">  params.type     请求类型</span></span><br><span class="line"><span class="comment">  params.url      请求网址</span></span><br><span class="line"><span class="comment">  params.data     请求参数</span></span><br><span class="line"><span class="comment">  params.success  回调函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">myJq.ajax = <span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 创建xhr</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.1 判断是get还是post</span></span><br><span class="line">    <span class="keyword">if</span>(params.type == <span class="string">"get"</span>)&#123;</span><br><span class="line">        <span class="comment">// 拼接参数</span></span><br><span class="line">        params.url += <span class="string">"?"</span> + params.data;</span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">	    <span class="comment">// 设置请求行</span></span><br><span class="line">        xhr.open(params.type, params.url);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//设置请求头</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    </span><br><span class="line">	    <span class="comment">//3. 发送请求</span></span><br><span class="line">        xhr.send(params.data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4. 拿到响应体</span></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//转成JSON对象</span></span><br><span class="line">          <span class="keyword">var</span> json = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//交给调用者处理</span></span><br><span class="line">          params.success(json);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-jQuery封装的ajax工具"><a href="#5-jQuery封装的ajax工具" class="headerlink" title="5. jQuery封装的ajax工具"></a>5. jQuery封装的ajax工具</h2><ul>
<li>jQuery是一个JS库：即一套用JS封装好的函数库</li>
<li>jQuery本身就已经封装好了方便程序员调用ajax的方法，功能比我们刚刚自己封装的更强大</li>
</ul>
<h3 id="5-1-ajax"><a href="#5-1-ajax" class="headerlink" title="5.1 $.ajax"></a>5.1 $.ajax</h3><ul>
<li>jQuery中用来发ajax请求的方法，跟我们封装的方法类似，但是功能更强大</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传入一个对象</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//请求网址</span></span><br><span class="line">  url: <span class="string">'./data.php'</span>,</span><br><span class="line">  <span class="comment">//请求类型</span></span><br><span class="line">  type: <span class="string">'post'</span>,</span><br><span class="line">  <span class="comment">//服务器响应数据类型，如果是跨域，可以改成jsonp</span></span><br><span class="line">  dataType: <span class="string">'json'</span>,</span><br><span class="line">  <span class="comment">//发送给服务器的数据（请求体）,如果是get请求数据写在url,如果是post才写data属性</span></span><br><span class="line">  data: &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  <span class="comment">//回调函数：响应回来调用的函数</span></span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求失败触发</span></span><br><span class="line">  error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>常用选项参数介绍：</p>
<ul>
<li><p>url：请求地址</p>
</li>
<li><p>type：请求方法，默认为 <code>get</code></p>
</li>
<li><p>dataType：服务端响应数据类型，一般只是在跨域时写jsonp，其他时候可以不写，自动根据响应头判断返回数据</p>
</li>
<li><p>data：需要传递到服务端的数据，如果 GET 则通过 URL 传递，如果 POST 则通过请求体传递</p>
</li>
<li><p>timeout：请求超时时间</p>
</li>
<li><p>success：请求成功之后触发</p>
</li>
<li><p>error：请求失败触发</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>有些用不到的属性，可以不用写</p>
</blockquote>
<ul>
<li>例子代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">    type:<span class="string">'get'</span>,</span><br><span class="line">    dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用$.ajax方法有个不太方便的地方是：每次要指定type属性，即请求的类型</p>
</blockquote>
<h3 id="5-2-get"><a href="#5-2-get" class="headerlink" title="5.2 $.get"></a>5.2 $.get</h3><ul>
<li>专门用来只做  <code>get</code>  请求的方法，参数与 <code>ajax</code> 方法一样，只是不用写 <code>type</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.get(&#123;</span><br><span class="line">    url:<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">    dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>或者可以不传对象，传四个参数<ul>
<li>参数1：请求url</li>
<li>参数2：要传递给服务器的数据（如果不传数据可以不写此参数）</li>
<li>参数3：回调函数，函数的第一个参数是服务器返回的数据</li>
<li>参数4：dataType，返回的数据格式</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'http://api.douban.com/v2/movie/top250'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'data'</span>);</span><br><span class="line">    </span><br><span class="line">&#125;,<span class="string">'jsonp'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="5-3-post"><a href="#5-3-post" class="headerlink" title="5.3 $.post"></a>5.3 $.post</h3><ul>
<li>专门用来只做  <code>post</code>  请求的方法，参数与 <code>ajax</code> 方法一样，只是不用写 <code>type</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.post(&#123;</span><br><span class="line">    url:<span class="string">'./data.php'</span>,</span><br><span class="line">    <span class="comment">//传字符串</span></span><br><span class="line">    data:<span class="string">"name=jack&amp;pwd=123"</span>,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>此方法要给服务器传递数据时，需要写  <code>data</code>  属性，属性值可以是  <code>&quot;name=jack&amp;pwd=123&quot;</code>  这样的字符串，也可以是对象， 代码如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.post(&#123;</span><br><span class="line">    url:<span class="string">'./data.php'</span>,</span><br><span class="line">    <span class="comment">//传对象</span></span><br><span class="line">    data:&#123; <span class="attr">name</span>:<span class="string">"jack"</span>, <span class="attr">pwd</span>:<span class="number">123</span> &#125;,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>或者可以不传对象，传四个参数</p>
<ul>
<li>参数1：请求url</li>
<li>参数2：要传递给服务器的数据（如果不传数据可以不写此参数）</li>
<li>参数3：回调函数，函数的第一个参数是服务器返回的数据</li>
<li>参数4：dataType，返回的数据格式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">'http://api.douban.com/v2/movie/top250'</span>,</span><br><span class="line">      &#123;<span class="attr">name</span>:<span class="string">"jack"</span>, <span class="attr">pwd</span>:<span class="number">123</span>&#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'data'</span>);</span><br><span class="line">       &#125;,</span><br><span class="line">      <span class="string">'jsonp'</span>);</span><br></pre></td></tr></table></figure>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><p>更多jQuery中的ajax方法，可查阅</p>
<p><a href="http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/10/JavaScript基础总结05(引用类型与值类型&对象&构造函数&Date&数组和字符串API&基本包装类型)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/10/JavaScript基础总结05(引用类型与值类型&对象&构造函数&Date&数组和字符串API&基本包装类型)/" itemprop="url">JavaScript基础(流程控制)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-10T16:20:43+08:00">
                2017-09-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JavaScript基础总结05-引用类型与值类型-amp-对象-amp-构造函数-amp-Date-amp-数组和字符串API-amp-基本包装类型"><a href="#JavaScript基础总结05-引用类型与值类型-amp-对象-amp-构造函数-amp-Date-amp-数组和字符串API-amp-基本包装类型" class="headerlink" title="JavaScript基础总结05(引用类型与值类型&amp;对象&amp;构造函数&amp;Date&amp;数组和字符串API&amp;基本包装类型)"></a>JavaScript基础总结05(引用类型与值类型&amp;对象&amp;构造函数&amp;Date&amp;数组和字符串API&amp;基本包装类型)</h1><h3 id="1-引用类型与值类型区别"><a href="#1-引用类型与值类型区别" class="headerlink" title="1. 引用类型与值类型区别"></a>1. 引用类型与值类型区别</h3><ul>
<li>引用类型(复杂数据类型): Array Object<ul>
<li>数据存储在堆中,地址存储在栈中</li>
</ul>
</li>
<li>值类型(基本数据类型): String Number Boolean Undefined Null<ul>
<li>数据存储在栈中</li>
</ul>
</li>
</ul>
<h3 id="2-对象"><a href="#2-对象" class="headerlink" title="2. 对象"></a>2. 对象</h3><blockquote>
<p>用于描述生活中的某个具体的事物的特征和行为</p>
</blockquote>
<p>属性:  用于描述对象的特征<br>方法:  用于描述对象的行为</p>
<h4 id="2-1-基本使用"><a href="#2-1-基本使用" class="headerlink" title="2.1 基本使用"></a>2.1 基本使用</h4><ul>
<li><p>语法:  </p>
<ul>
<li>构造函数声明: <code>var 对象名 = new Object();</code></li>
<li>直面量方式: <code>var 对象名 = {};</code></li>
</ul>
</li>
<li><p>对象取值与赋值</p>
<ul>
<li>点语法:  对象名.属性名</li>
<li>字符串语法: 对象名[‘属性名]’<h4 id="2-2-遍历对象的属性"><a href="#2-2-遍历对象的属性" class="headerlink" title="2,2 遍历对象的属性"></a>2,2 遍历对象的属性</h4>语法:  <code>for(var key in 对象名) {  }</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> teacher)&#123;</span><br><span class="line">    <span class="comment">//key是一个属性名的字符串</span></span><br><span class="line">    <span class="built_in">console</span>.log ( key );</span><br><span class="line">    <span class="comment">/*注意：只能通过字符串语法来取值*/</span></span><br><span class="line">    <span class="built_in">console</span>.log ( teacher[key] );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="3-使用构造函数创建对象"><a href="#3-使用构造函数创建对象" class="headerlink" title="3. 使用构造函数创建对象"></a>3. 使用构造函数创建对象</h3><blockquote>
<p>如果调用一个函数的时候使用了new关键字,那么这个函数就是构造函数</p>
</blockquote>
<p>new关键字原理</p>
<ol>
<li>在内存中开辟空间,创建一个空对象</li>
<li>将this指向这个对象</li>
<li>进行对象赋值</li>
<li>返回对象</li>
</ol>
<p>使用构造函数需要注意的点</p>
<ol>
<li>通常函数名首字母大写，用于区分普通函数</li>
<li>必须要使用new关键字来调用</li>
<li>.手动在函数内return造成的影响<ol start="4">
<li>如果 return 基本数据类型 ： 无效，还是会返回默认对象</li>
<li>如果 return 复杂数据类型 ： 有效，会覆盖默认的对象</li>
</ol>
</li>
</ol>
<h3 id="4-Date对象"><a href="#4-Date对象" class="headerlink" title="4. Date对象"></a>4. Date对象</h3><blockquote>
<p>获取当前时间</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//Date对象：获取时间</span></span><br><span class="line">    <span class="comment">//1.声明Date对象</span></span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="built_in">console</span>.log ( date );<span class="comment">//date对象在打印的时候会自动转成字符串打印</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.转成本地时间</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.toLocaleTimeString () );</span><br><span class="line">    <span class="built_in">console</span>.log ( date.toTimeString () );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.获取时间中的年月日，时分秒</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getFullYear () );<span class="comment">//2018</span></span><br><span class="line">    <span class="comment">//月范围  0-11  表示1-12月</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getMonth () );<span class="comment">//5   6月</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getDate () );<span class="comment">//24</span></span><br><span class="line">    <span class="comment">//day 星期   0-6   星期天-星期六</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getDay () );<span class="comment">//0</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getHours () );<span class="comment">//时</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getMinutes () );<span class="comment">//分</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getSeconds () );<span class="comment">//秒</span></span><br><span class="line">    <span class="built_in">console</span>.log ( date.getMilliseconds () );<span class="comment">//毫秒</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4.手动创建一个日期</span></span><br><span class="line">    <span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2020</span>,<span class="number">2</span>,<span class="number">22</span>,<span class="number">18</span>,<span class="number">30</span>,<span class="number">35</span>);</span><br><span class="line">    <span class="built_in">console</span>.log ( date1 );</span><br><span class="line">    <span class="built_in">console</span>.log ( <span class="keyword">new</span> <span class="built_in">Date</span> ( <span class="string">"2022-05-06 12:03:35"</span> ) );</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-数组对象常用的API"><a href="#5-数组对象常用的API" class="headerlink" title="5. 数组对象常用的API"></a>5. 数组对象常用的API</h3><ol>
<li>连接数组:concat()</li>
<li>将数组元素拼接成字符串:join()</li>
<li>删除数组最后一个元素:pop()</li>
<li>往数组后面添加元素:push()</li>
<li>翻转数组:reverse()</li>
<li>删除数组第一个元素:shift()</li>
<li>查找数组元素:slice()</li>
<li>数组排序:sort()</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//只要声明了一个数组，那么这个数组就拥有所有的API</span></span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">88</span>,<span class="number">90</span>,<span class="number">100</span>,<span class="number">66</span>,<span class="number">25</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.将两个数组连成一个数组</span></span><br><span class="line">    <span class="built_in">console</span>.log ( arr.concat ( [ <span class="number">90</span>, <span class="number">100</span>, <span class="number">200</span> ] ) );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.将数组中所有的元素拼接成一个字符串</span></span><br><span class="line">    <span class="built_in">console</span>.log ( arr.join () );<span class="comment">//'88,90,100,66,25'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.删除并返回数组的最后一个元素</span></span><br><span class="line">    <span class="keyword">var</span> last =  arr.pop();<span class="comment">//  arr.length--</span></span><br><span class="line">    <span class="built_in">console</span>.log ( arr );</span><br><span class="line">    <span class="built_in">console</span>.log ( last );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.往数组后面添加一个元素</span></span><br><span class="line">    arr.push ( <span class="number">65</span> ) ;<span class="comment">//arr[arr.lenth] = 65</span></span><br><span class="line">    <span class="built_in">console</span>.log ( arr );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.翻转数组</span></span><br><span class="line">    <span class="built_in">console</span>.log ( arr.reverse () );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.删除并返回数组的第一个元素</span></span><br><span class="line">    arr.shift();</span><br><span class="line">    <span class="built_in">console</span>.log ( arr );<span class="comment">//[66, 100, 90, 88]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//7.返回数组中执行位置的元素</span></span><br><span class="line">    <span class="comment">//arr.slice(start,end);     start &lt;= 范围 &lt; end</span></span><br><span class="line">    <span class="keyword">var</span> newArr =  arr.slice(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">console</span>.log ( newArr );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//8.数组排序:参数是一个回调函数</span></span><br><span class="line">  <span class="keyword">var</span> newArr =   arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//return a - b;//从小到大</span></span><br><span class="line">      <span class="keyword">return</span> b - a;<span class="comment">//从大到小</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log ( newArr );</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-String对象"><a href="#6-String对象" class="headerlink" title="6. String对象"></a>6. String对象</h3><ul>
<li>字符串恒定性:<ul>
<li>字符串不可以被修改的</li>
<li>般调用字符串api的时候使用新的变量来接收</li>
</ul>
</li>
<li>字符串恒定性原理:<ul>
<li>1.在内存中有一块专门的内存空间区域负责存储字符串(字符串常量区)</li>
<li>2.(缓存机制)当我们声明一个字符串的时候，编译器会先去这个区域寻找有没有该字符串，如果有就直接取出来，没有就新开辟空间</li>
<li>3.这块内存空间中的字符串一旦被创建，是不可以被修改的</li>
</ul>
</li>
</ul>
<p>字符串常用API</p>
<ol>
<li>获取字符串长度:str.length</li>
<li>获取字符串某一个下标字符:str.charAt()</li>
<li>拼接字符串:str.concat</li>
<li>判断字符串中是否包含某些字符串:str.indexOf()</li>
<li>截取字符串:str.substr()</li>
<li>修改字符串:str.replace()</li>
<li>大小写转换:str.toLowerCase()小写 str.toUpperCase()大写</li>
<li>分隔字符串：str.split()</li>
</ol>
<h3 id="基本包装类型"><a href="#基本包装类型" class="headerlink" title="基本包装类型"></a>基本包装类型</h3><blockquote>
<p>主要是为了让基本数据类型也可以调用对象的方法</p>
</blockquote>
<ul>
<li>基本数据的对象类型<ul>
<li>string对象: <code>new String()</code></li>
<li>number对象: <code>new Number()</code></li>
<li>boolean对象: <code>new Boolean()</code></li>
</ul>
</li>
</ul>
<p>对开发者影响不大，当我们在使用字符串的api的时候，编译器会自动帮我们转换</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;<span class="comment">//为了可以让number这个数据类型能够调用对象的方法，编译器会自动帮我们转成对象(基本包装类型)</span></span><br><span class="line"><span class="comment">// 编译器帮我们做了一件事：  var num = new Number()</span></span><br><span class="line">num.toString();</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/JavaScript基础总结03(数组)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/05/JavaScript基础总结03(数组)/" itemprop="url">JavaScript基础(流程控制)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T08:35:43+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JavaScript基础-流程控制"><a href="#JavaScript基础-流程控制" class="headerlink" title="JavaScript基础(流程控制)"></a>JavaScript基础(流程控制)</h1><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><blockquote>
<p>多个数据放入集合中，这个集合就叫做数组</p>
</blockquote>
<ul>
<li>获取数组中的某一个数据<ul>
<li>语法：scores[下标]</li>
</ul>
</li>
<li>获取数组中元素的数量<ul>
<li>语法：length = scores.length;//得到number类型的数字</li>
</ul>
</li>
<li>总结：数组主要由三要素构成<ul>
<li>元素：数组中的数据</li>
<li>下标：元素在数组中的位置</li>
<li>长度：数组中元素的数量</li>
</ul>
</li>
</ul>
<figure class="highlight htmlbars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">    //需求: 学生分数存储(25,98,100,89,88)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    //使用多个变量弊端：（1）代码冗余 （2）不便于维护</span></span><br><span class="line"><span class="xml">    // var s1 = 25;</span></span><br><span class="line"><span class="xml">    // var s2 = 98;</span></span><br><span class="line"><span class="xml">    // var s3 = 100;</span></span><br><span class="line"><span class="xml">    // var s4 = 89;</span></span><br><span class="line"><span class="xml">    // var s5 = 99;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    //数组：数据的组合，一个变量可以存储多个数据</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    //1.声明数组  语法： var 数组名 = [元素1，元素2，元素3]</span></span><br><span class="line"><span class="xml">    var array = [25,98,100,89,99,5];</span></span><br><span class="line"><span class="xml">    console.log ( array );//</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    //2.下标：记录元素的位置   注意：数据中元素的下标是从0开始</span></span><br><span class="line"><span class="xml">    //可以获取数组中的元素  语法：  数字名[下标]</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    console.log ( array[ 0 ] );</span></span><br><span class="line"><span class="xml">    var a = array[0];//将数组中的第一个元素存储到变量a中</span></span><br><span class="line"><span class="xml">    console.log ( a );</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    //3.长度：数组中元素的数量</span></span><br><span class="line"><span class="xml">    //语法：数组名.length</span></span><br><span class="line"><span class="xml">    console.log ( array.length );//6</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="数组冒泡排序算法"><a href="#数组冒泡排序算法" class="headerlink" title="数组冒泡排序算法"></a>数组冒泡排序算法</h3><p>冒泡算法排序核心：数组中相邻的两个元素比较大小，如果前者大于后者则交换位置</p>
<p>原理:</p>
<ol>
<li>外层循环决定比较轮数</li>
<li>内层循环决定比较次数</li>
<li>相邻两个元素比较大小,如果前面大于后面则交换位置</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">18</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">5</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(arr);   <span class="comment">//[18, 15, 10, 20, 5]</span></span><br><span class="line">    <span class="comment">// 外层循环决定比较轮数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 内层循环决定比较次数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; arr.length<span class="number">-1</span>-i; j++) &#123;</span><br><span class="line">            <span class="comment">// 核心: 比较两个值大小,如果第一个数大于第二个数,则交换位置</span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">var</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(arr);   <span class="comment">//[5, 10, 15, 18, 20]</span></span><br></pre></td></tr></table></figure>
<h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><h4 id="双层循环方法"><a href="#双层循环方法" class="headerlink" title="双层循环方法"></a>双层循环方法</h4><p>原理</p>
<ol>
<li><p>外层循环遍历旧数组arr</p>
</li>
<li><p>内层循环遍历新数组newArr，将arr[i]依次与newArr的每一个元素比较<br> 2.1 如果arr[i] == newArr[j],表示元素重复，则跳出内层循环</p>
</li>
<li>内层循环遍历完成之后，如果数组是唯一的,那么j就等于新数组的长度,就将旧数组添加到新数组</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">20</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">78</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">39</span>,<span class="number">20</span>];<span class="comment">//[20,25,66,78,39]</span></span><br><span class="line"><span class="comment">// 旧数组</span></span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"><span class="comment">// 遍历旧数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 遍历新数组,比较新旧数组是否重复,重复就跳出循环</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; newArr.length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] === newArr[j])&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果数组是唯一的,那么j就等于新数组的长度,就将旧数组添加到新数组</span></span><br><span class="line">    <span class="keyword">if</span>(j === newArr.length)&#123;</span><br><span class="line">        newArr.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);   <span class="comment">//[20, 25, 66, 78, 25, 66, 39, 20]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr);    <span class="comment">//[20, 25, 66, 78, 39]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>总结<ul>
<li>使用了</li>
<li>并且兼容性好</li>
</ul>
</li>
</ul>
<h4 id="indexOf方法"><a href="#indexOf方法" class="headerlink" title="indexOf方法"></a>indexOf方法</h4><blockquote>
<p>可以使用indexOf简化内层循环</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">20</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">78</span>,<span class="number">25</span>,<span class="number">66</span>,<span class="number">39</span>,<span class="number">20</span>];<span class="comment">//[20,25,66,78,39]</span></span><br><span class="line"><span class="comment">// 旧数组</span></span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 使用indexOf方法</span></span><br><span class="line">    <span class="keyword">if</span>(newArr.indexOf(arr[i]) === <span class="number">-1</span>)&#123;</span><br><span class="line">        newArr.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);   <span class="comment">//[20, 25, 66, 78, 25, 66, 39, 20]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr);    <span class="comment">//[20, 25, 66, 78, 39]</span></span><br></pre></td></tr></table></figure>
<h3 id="排序后去重"><a href="#排序后去重" class="headerlink" title="排序后去重"></a>排序后去重</h3><p>试想我们先将要去重的数组使用 sort 方法排序后，相同的值就会被排在一起，然后我们就可以只判断当前元素与上一个元素是否相同，相同就说明重复，不相同就添加进 res</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = [];</span><br><span class="line">    <span class="keyword">var</span> sortedArray = array.concat().sort();</span><br><span class="line">    <span class="keyword">var</span> seen;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = sortedArray.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// 如果是第一个元素或者相邻的元素不相同</span></span><br><span class="line">        <span class="keyword">if</span> (!i || seen !== sortedArray[i]) &#123;</span><br><span class="line">            res.push(sortedArray[i])</span><br><span class="line">        &#125;</span><br><span class="line">        seen = sortedArray[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure>
<h4 id="filter方法-ES5"><a href="#filter方法-ES5" class="headerlink" title="filter方法(ES5)"></a>filter方法(ES5)</h4><p>使用indexOf方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));	<span class="comment">//[1, 2, '1']</span></span><br></pre></td></tr></table></figure></p>
<p>排序去重的方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<h4 id="ES6的Array-from"><a href="#ES6的Array-from" class="headerlink" title="ES6的Array.from()"></a>ES6的Array.from()</h4><ul>
<li><p>Array.from()</p>
<ul>
<li>方法从类似数组或可迭代的对象创建一个新的Array实例</li>
</ul>
</li>
<li><p>Set</p>
<ul>
<li>一个可以是任何类型的独一无二的值的集合<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6的Array.from()</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Array.from(): 该方法从类似数组或可迭代的对象创建一个新的Array实例</span></span><br><span class="line">	<span class="comment">// Set:一个可以是任何类型的独一无二的值的集合.</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(array));</span><br><span class="line">	<span class="comment">// 也可以写成如下</span></span><br><span class="line">	<span class="comment">//  return [...new Set(arr)];</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>还可以简化:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unique = <span class="function">(<span class="params">a</span>) =&gt;</span> [...new <span class="built_in">Set</span>(a)]</span><br></pre></td></tr></table></figure></p>
<p>如果用map对象:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> seen = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">a</span>) =&gt;</span> !seen.has(a) &amp;&amp; seen.set(a, <span class="number">1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="对象数组去重-性能优化"><a href="#对象数组去重-性能优化" class="headerlink" title="对象数组去重(性能优化)"></a>对象数组去重(性能优化)</h3><blockquote>
<p>以上方法都是对于数组数据类型而言，如果换做对象数组就无能为力了，下面是对象数组的去重方法</p>
</blockquote>
<p>版本一<br>这种方法是利用一个空的 Object 对象，我们把数组的值存成 Object 的 key 值，比如 Object[value1] = true，在判断另一个值的时候，如果 Object[value2]存在的话，就说明该值是重复的。示例代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(item) ? <span class="literal">false</span> : obj[item] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<p>版本二<br>我们可以发现，版本一是有问题的，因为 数字1 和 字符串’1’ 是不同的，但是这种方法会判断为同一个值，这是因为对象的键值只能是字符串，所以我们可以使用 typeof item + item 拼成字符串作为 key 值来避免这个问题：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">'1'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<p>版本三<br>然而，即便如此，我们依然无法正确区分出两个对象，比如 {value: 1} 和 {value: 2}，因为 typeof item + item 的结果都会是 object[object Object]，不过我们可以使用 JSON.stringify 将对象序列化：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [&#123;<span class="attr">value1</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">value2</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">value1</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">value4</span>:<span class="number">4</span>&#125;];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,array</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)) ? <span class="literal">false</span> : obj[<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)] = <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/02/JavaScript基础总结02(流程控制)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/02/JavaScript基础总结02(流程控制)/" itemprop="url">JavaScript基础(流程控制)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-02T20:35:43+08:00">
                2017-09-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JavaScript基础-流程控制"><a href="#JavaScript基础-流程控制" class="headerlink" title="JavaScript基础(流程控制)"></a>JavaScript基础(流程控制)</h1><p>[TOC]</p>
<h2 id="程序流程控制"><a href="#程序流程控制" class="headerlink" title="程序流程控制"></a>程序流程控制</h2><h3 id="if-else结构"><a href="#if-else结构" class="headerlink" title="if-else结构"></a>if-else结构</h3><blockquote>
<p>用于两种互斥的条件判断</p>
</blockquote>
<p>语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>（条件）&#123;</span><br><span class="line">    条件成立时需要执行的代码</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    条件不成立时需要执行的代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="if-else-if-else"><a href="#if-else-if-else" class="headerlink" title="if-else if-else"></a>if-else if-else</h3><blockquote>
<p>适用于多种条件判断</p>
</blockquote>
<p>语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件<span class="number">1</span>)&#123;</span><br><span class="line">    条件<span class="number">1</span>成立时需要执行的代码</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件<span class="number">2</span>)&#123;</span><br><span class="line">    条件<span class="number">2</span>成立时需要执行的代码</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件<span class="number">3</span>)&#123;</span><br><span class="line">    条件<span class="number">3</span>成立时需要执行的代码</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    以上所有条件都不成立时需要执行的代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意点：</p>
<ol>
<li>if-else if -else结构中必须以if开头，中间的else if可以是多个，末尾的esle可以省略（一般都不会省略）</li>
<li>if-else if-else语句中所有的大括号中的代码只会执行其中一个，不会执行多个</li>
</ol>
<h3 id="switch-case结构"><a href="#switch-case结构" class="headerlink" title="switch-case结构"></a>switch-case结构</h3><blockquote>
<p>适用于固定值匹配<br>匹配：全等的关系</p>
</blockquote>
<p>语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">        表达式的结果 === 值<span class="number">1</span>，需要执行的代码</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">        表达式的结果 === 值<span class="number">2</span>，需要执行的代码</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">3</span>：</span><br><span class="line">        表达式的结果 === 值<span class="number">3</span>，需要执行的代码</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    .......</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        表达式的结果和上面所有的<span class="keyword">case</span>后面的值都不全等，则会执行这里的代码</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>注意事项</li>
</ul>
<ol>
<li>表达式的结果要和值一定是全等的关系===</li>
<li>break作用：结束该switch语句，所以一般情况下要加上，如果不加上则会发生穿透<br>穿透：从上一个case代码快执行到下一个case代码快<br>break关键字的作用就是防止穿透</li>
<li>default语句可以写在任何地方，也可以省略，但是一般写在最后，这是一种代码规范</li>
</ol>
<ul>
<li>swicth语句穿透用法 (多种值需要执行相同代码)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">/**合理穿透：当存在多种值需要执行相同代码时使用穿透可以节省代码</span></span><br><span class="line"><span class="comment">     * 用户输入某一个月份，告诉用户这个月份属于什么季节</span></span><br><span class="line"><span class="comment">     * 12，1，2 冬季</span></span><br><span class="line"><span class="comment">     * 3，4，5 春季</span></span><br><span class="line"><span class="comment">     * 6，7，8 夏季</span></span><br><span class="line"><span class="comment">     * 9，10，11 秋季</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> month = +prompt(<span class="string">"请输入月份"</span>);</span><br><span class="line">    <span class="keyword">switch</span> (month)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            alert(<span class="string">"冬季"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            alert(<span class="string">"春季"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">            alert(<span class="string">"夏季"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">            alert(<span class="string">"秋季"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            alert(<span class="string">"你来自火星吧？"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="三元运算符与三元表达式"><a href="#三元运算符与三元表达式" class="headerlink" title="三元运算符与三元表达式"></a>三元运算符与三元表达式</h3><ul>
<li>三元运算符语法</li>
</ul>
<ol>
<li>三元运算符： ?:</li>
<li>三元表达式： 表达式?代码1：代码2<br> 1.如果表达式成立则执行代码1，否则执行代码2<br> 2.如果代码1或者代码2有运算结果则三元运算式的结果就是他们其中的一个</li>
<li>三元运算符做的事和if-else类似，只是代码更简洁</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="number">10</span>;</span><br><span class="line">   num1 &gt; <span class="number">0</span> ? <span class="built_in">console</span>.log(<span class="string">'哈哈'</span>) : <span class="built_in">console</span>.log(<span class="string">'呵呵'</span>);<span class="comment">//哈哈</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//上面这个三元表达式等价于下面的if - else语句</span></span><br><span class="line">   <span class="comment">// if(num1 &gt; 0)&#123;</span></span><br><span class="line">   <span class="comment">//     console.log ( "哈哈" );</span></span><br><span class="line">   <span class="comment">// &#125;else&#123;</span></span><br><span class="line">   <span class="comment">//     console.log ( "呵呵" );</span></span><br><span class="line">   <span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="分支结构三种语法总结"><a href="#分支结构三种语法总结" class="headerlink" title="分支结构三种语法总结"></a>分支结构三种语法总结</h3><ul>
<li>原则上，三种分支结构语句之间可以互转，只不过每一种分支结构语句适用场景不一样</li>
</ul>
<ol>
<li>最常用：if-else 适合做条件判断</li>
<li>switch-case 适合做固定值判断</li>
<li>三元表达式： 比if-else代码更简洁，但是代码量较多时易读性变差</li>
</ol>
<h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>语法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(条件 <span class="literal">true</span>/<span class="literal">false</span>)&#123;</span><br><span class="line"></span><br><span class="line">       循环体/需要重复执行的代码;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>执行步骤：</p>
<ol>
<li><p>判断条件是否成立<br>1.1 如果成立，执行循环体代码，然后重复步骤1<br>1.2 如果不成立，结束循环，执行大括号后面的代码</p>
</li>
<li><p>注意点<br>（1）小括号中的语句，无论结果是什么都会转换成布尔类型来判断是否成立<br>（2）避免写一个死循环</p>
</li>
</ol>
<h3 id="do-while循环"><a href="#do-while循环" class="headerlink" title="do-while循环"></a>do-while循环</h3><p>语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    循环体;</span><br><span class="line">&#125;<span class="keyword">while</span>( 条件 );</span><br></pre></td></tr></table></figure></p>
<p> 执行过程</p>
<ol>
<li>先执行循环体代码</li>
<li>执行条件语句<br>如果结果为true，执行循环体代码<br>如果为false，循环结束</li>
<li>重复步骤2</li>
</ol>
<p>do-while和while实现的循环其实是一样的，只有一个不同点：do-while循环不管怎样先执行一次循环体代码，然后再判断条件</p>
<ol start="4">
<li>特点<br>while循环：先奏后斩（先判断条件再执行循环体）<br>do-while循环：先斩后奏（不管怎样先执行一次循环体代码，然后再判断条件）</li>
</ol>
<h3 id="for循环语句-最常用"><a href="#for循环语句-最常用" class="headerlink" title="for循环语句(最常用)"></a>for循环语句(最常用)</h3><p>语法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( 语句<span class="number">1</span>;语句<span class="number">2</span>;语句<span class="number">3</span> )&#123;</span><br><span class="line">    循环体：需要反复执行的代码;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>2.执行过程<ul>
<li>1.首先执行语句1</li>
<li>2.执行语句2<ul>
<li>如果为true，执行中间循环体代码</li>
<li>如果为false，循环结束</li>
</ul>
</li>
<li>3.执行语句3</li>
<li>4.重复步骤2</li>
</ul>
</li>
</ul>
<h3 id="循环结构三中语句总结"><a href="#循环结构三中语句总结" class="headerlink" title="循环结构三中语句总结"></a>循环结构三中语句总结</h3><ol>
<li>原则上，三种循环结构语句之间可以互转，只不过每一种语句的适用场景不一样</li>
<li>最常用：for循环：适合循环次数固定</li>
<li>while循环：适合循环次数不固定</li>
<li>do-while循环：适合循环次数不固定，但是循环体代码至少要执行一次</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/10/JavaScript函数及作用域/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张铭钦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangMingQin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/10/JavaScript函数及作用域/" itemprop="url">JavaScript函数及作用域</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-10T20:35:43+08:00">
                2017-08-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JavaScript函数及作用域"><a href="#JavaScript函数及作用域" class="headerlink" title="JavaScript函数及作用域"></a>JavaScript函数及作用域</h1><h3 id="1-函数"><a href="#1-函数" class="headerlink" title="1. 函数"></a>1. 函数</h3><blockquote>
<p>函数就是将一段代码存到变量中，要用的时候就拿出来执行，这样可以避免代码冗余</p>
</blockquote>
<ul>
<li><p>函数声明：<code>function 函数名((){ //代码块 }</code></p>
<ul>
<li>函数名其实就是变量名，只是习惯上称之为函数名</li>
</ul>
</li>
<li><p>调用函数（执行函数的代码块）: <code>函数名(()</code></p>
</li>
</ul>
<p>函数表达式: <code>var fn = function() {};</code></p>
<h3 id="2-函数传参"><a href="#2-函数传参" class="headerlink" title="2. 函数传参"></a>2. 函数传参</h3><blockquote>
<p>函数的参数的传递本质：实参给形参赋值</p>
</blockquote>
<ul>
<li>函数名(实际参数，简称实参)</li>
<li><p>函数声明 <code>function 函数名(形式参数，简称形参){  函数体代码  }</code></p>
</li>
<li><p>调用函数 函数名(实际参数，简称实参)</p>
</li>
</ul>
<h3 id="3-函数返回值"><a href="#3-函数返回值" class="headerlink" title="3. 函数返回值"></a>3. 函数返回值</h3><blockquote>
<p>函数将自身的计算结果返回给调用者</p>
</blockquote>
<p>return返回值时</p>
<ol>
<li>如果一个函数没有return关键字，默认返回值是undefined</li>
<li>如果一个函数有return关键字，但是后面没有值，返回值是undefined</li>
<li>return关键字后面的代码都不会执行</li>
<li>如果return关键字后面有值,此时函数的返回值就是return后面的值</li>
</ol>
<p>函数的几种形态:</p>
<ul>
<li>无参无返回函数：用的不多   <ul>
<li>单纯的执行一段代码</li>
</ul>
</li>
<li>无参有返回函数：用的不多</li>
<li>有参无返回：用的不多的</li>
<li>有参有返回值：用的比较多    <ul>
<li>函数接收调用者传递的参数来进行运算来实现自己的功能，然后将实现后的结果返回给调用者</li>
</ul>
</li>
</ul>
<h3 id="函数的"><a href="#函数的" class="headerlink" title="函数的"></a>函数的</h3><h3 id="4-作用域"><a href="#4-作用域" class="headerlink" title="4. 作用域"></a>4. 作用域</h3><blockquote>
<p>变量起作用的范围</p>
</blockquote>
<ul>
<li>全局作用域<ul>
<li>变量在任何地方起作用,在函数外声明</li>
</ul>
</li>
<li>局部作用域<ul>
<li>变量只在函数内部起作用,在函数内部声明<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.全局变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">  </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log ( a );  <span class="comment">//10</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.局部变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params">  </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">console</span>.log ( num );  <span class="comment">//100</span></span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br><span class="line"><span class="built_in">console</span>.log ( num );  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="5-作用域链"><a href="#5-作用域链" class="headerlink" title="5. 作用域链"></a>5. 作用域链</h3><ul>
<li>作用域这么来的<ul>
<li>默认情况下，我们的js代码处于全局作用域，当我们声明一个函数时，此时函数体会开辟一个局部作用域， 如果我们在这个函数体中又声明一个函数，那么又会开辟一个新的局部作用域，以此类推，就会形成一个作用域链</li>
</ul>
</li>
<li>变量在作用域链上的访问规则<ul>
<li>就近原则：访问变量时，会优先访问的是在自己作用域链上声明的变量，如果自己作用域链上没有声明这个变量，那么就往上一级去找有没有声明这个变量，如果有就访问，如果没有就继续往上找有没有声明，直到找到0级作用域链上，如果有，就访问，如果没有就报错</li>
</ul>
</li>
</ul>
<p><img src="/img/作用域链.png" alt="Alt text"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">/*1.作用域链由来：默认情况下，变量处在全局作用域（0级链），声明一个函数，会开辟一个局部作用域（1级链），</span></span><br><span class="line"><span class="comment">    如果在该函数中又声明一个函数，则会形成一个新的局部作用域（2级链）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    2.变量在作用域的访问原则：就近原则</span></span><br><span class="line"><span class="comment">        * 解释：访问变量时，首先会从自身所在的作用域查看是否声明，如果有声明则是该变量。如果没有声明，则会从父级</span></span><br><span class="line"><span class="comment">       作用域查看是否声明，如果有则是该变量，以此类推，如果父级没有，则继续往父级找，一直找到0级链，如果0级链还是没有</span></span><br><span class="line"><span class="comment">       则程序报错</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;<span class="comment">//0级</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params">  </span>) </span>&#123;<span class="comment">//0级，函数变量名自身还是0级的</span></span><br><span class="line">        <span class="comment">//局部作用域</span></span><br><span class="line">         <span class="keyword">var</span> num = <span class="number">20</span>;<span class="comment">//1级链</span></span><br><span class="line">        <span class="built_in">console</span>.log ( <span class="string">'fn1:'</span> + num );</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params">  </span>) </span>&#123;<span class="comment">//1级链，fn2自身还是在fn1的作用域下声明的</span></span><br><span class="line">            <span class="comment">//局部作用域</span></span><br><span class="line">            <span class="keyword">var</span> num = <span class="number">30</span>;<span class="comment">//2级链</span></span><br><span class="line">            <span class="built_in">console</span>.log ( <span class="string">'fn2:'</span> + num );</span><br><span class="line">        &#125;</span><br><span class="line">        fn2();</span><br><span class="line">    &#125;</span><br><span class="line">    fn1();</span><br><span class="line">    <span class="built_in">console</span>.log ( <span class="string">'函数外'</span> + num );</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-js预解析"><a href="#6-js预解析" class="headerlink" title="6. js预解析"></a>6. js预解析</h3><ul>
<li>预解析机制:<ul>
<li>js在执行代码之前,会把变量的声明提升到所在作用域的最顶端<ul>
<li>将变量声明提前（相当于提前开辟内存空间），变量的赋值与函数的调用还是在原地</li>
<li>函数的声明也会提前</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>好处:<br>让函数可以在任何地方被调用</p>
<p>注意:<br>如果一个变量在声明的时候没有使用var,改变量无论写在声明位置都是全局的,不参与预解析 </p>
<p>### </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">张铭钦</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张铭钦</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
